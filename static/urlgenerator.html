<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8"/>
  <script src="https://unpkg.com/jquery"></script>
  <script src="https://surveyjs.azureedge.net/1.5.13/survey.jquery.min.js"></script>
</head>
<body>
<div id="surveyContainer"></div>
<script> 
Survey.StylesManager.applyTheme("bootstrap");

var surveyJSON = {title:"URL Generator",description:"Please input the parameters you would like to run the API with.",pages:[{name:"API Parameter Selection",elements:[{type:"expression",name:"Outputted URL:",expression:"{question2}+\"api/\"+{question1}+\"/\"+iif(({question1} = 'constant' or {question1} = 'length' or {question1} = 'random'),{question4},'mdp')+\"/\"+{question6}+\"/\"+{question7}+\"/\"+iif({question11}=0,\"inf\",{question1})+\"/\"+{question10}+\"/\"+iif({question15}=0,\"inf\",{question15})+\"/\"+{question14}+\"/\"+iif({question13}=0,\"inf\",{question13})+iif({question1}=\"length\",\"/\",iif({question1}=\"constant\",\"/\"+{question26}+\"/\",iif({question1}=\"random\",iif({question8}=\"uniform\",\"/\"+{question8}+\"/\"+{question22}+\"/\"+{question25}+\"/\",\"/\"+{question8}+\"/\"+{question21}+\"/\"+{question23}+\"/\"),iif({question5}=\"no_scaling\",\"/\"+ {question5}+\"/\",\"/\"+{question5}+\"/\"+{question19}+\"/\"+{question20}+\"/\"))))+{question12}+\"/\"+{question9}+\"/\"",commentText:"Other (describe)"},{type:"boolean",name:"question2",useDisplayValuesInTitle:false,title:"Do you want to use the production-ready API for this experiment?",description:"This will almost always be yes, unless you are doing some testing.",defaultValue:"true",isRequired:true,labelTrue:"Yes",labelFalse:"No",valueTrue:"https://safe-retreat-20317.herokuapp.com/",valueFalse:"https://aqueous-hollows-34193.herokuapp.com/"},{type:"text",name:"question9",title:"How many decimal points should we round assigned values to?",description:"If you input 0, we will round to the nearest integer.",defaultValue:"0",isRequired:true,inputType:"number"},{type:"boolean",name:"question12",useDisplayValuesInTitle:false,title:"Should points be in per-hour or per-task-completion?",description:"E.g. for a 2 hour task with 18 points: 9/h versus 18\n; note also that users will have to use a timer in Complice for points-per-hour",defaultValue:"false",isRequired:true,labelTrue:"Per Hour",labelFalse:"Per Task",valueTrue:"true",valueFalse:"false"},{type:"radiogroup",name:"question1",title:"What point assignment method do you want to use?",defaultValue:"greedy",isRequired:true,choices:[{value:"constant",text:"constant"},{value:"length",text:"length"},{value:"random",text:"random"},{value:"greedy",text:"greedy algorithm (optimal, fastest)"},{value:"dp",text:"dynamic programming (optimal)"}]},{type:"html",name:"question3",html:"<b>Point-assignment specific inputs</b>"},{type:"radiogroup",name:"question4",visibleIf:"{question1} = 'constant' or {question1} = 'length' or {question1} = 'random'",title:"What scheduler would you like to use?",description:"This only applies when using constant, length and random point-assignment methods.",defaultValue:"basic",isRequired:true,choices:[{value:"basic",text:"basic (highest points first)"},{value:"deadline",text:"deadline (first any tasks due today, then highest points)"}]},{type:"radiogroup",name:"question8",visibleIf:"{question1} = 'random'",title:"What distribution do you want to use with random-point assignment?",defaultValue:"normal",isRequired:true,choices:[{value:"uniform",text:"uniform"},{value:"normal",text:"normal"}]},{type:"text",name:"question21",visibleIf:"{question8} = 'item2' and {question1} = 'random'",title:"What mean do you want to use for this distribution?",defaultValue:"10",isRequired:true},{type:"text",name:"question23",visibleIf:"{question8} = 'item2' and {question1} = 'random'",title:"What standard deviation do you want to use for this distribution?",defaultValue:"2",isRequired:true},{type:"text",name:"question22",visibleIf:"{question8} = 'item1' and {question1} = 'random'",title:"What minimum value do you want to use for this distribution?",defaultValue:"8",isRequired:true},{type:"text",name:"question25",visibleIf:"{question8} = 'item1' and {question1} = 'random'",title:"What maximum value do you want to use for this distribution?",defaultValue:"12",isRequired:true},{type:"text",name:"question26",visibleIf:"{question1} = 'constant'",title:"What task value do you want to use with this point-assignment method?",defaultValue:"10",isRequired:true},{type:"text",name:"question24",visibleIf:"{question1} = 'dp' or {question1} = 'old-report' or {question1} = 'greedy'",title:"What mixing parameter do you want to use with this point-assignment method?",description:"The mixing parameter must be between 0 and 1.",defaultValue:"0",isRequired:true},{type:"radiogroup",name:"question5",visibleIf:"{question1} = 'dp' or {question1} = 'old-report' or {question1} = 'greedy'",title:"What point scaling do you want to use?",defaultValue:"no_scaling",isRequired:true,choices:[{value:"no_scaling",text:"No scaling"},{value:"min_max",text:"Min-max scaling"},{value:"mean_value",text:"Mean-value scaling"}]},{type:"text",name:"question19",visibleIf:"{question1} = 'dp' or {question1} = 'old-report' or {question1} = 'greedy' and {question5} <> 'no_scaling'",title:"What scaling minimum do you want to use with this method?",defaultValue:"5",isRequired:true},{type:"text",name:"question20",visibleIf:"{question1} = 'dp' or {question1} = 'old-report' or {question1} = 'greedy' and {question5} <> 'no_scaling'",title:"What scaling maximum do you want to use with this method?",defaultValue:"10",isRequired:true},{type:"html",name:"question16",html:"<b>Default values</b>"},{type:"text",name:"question6",title:"What is the default duration (in minutes) for this experiment?",description:"This is only used when the user doesn't input a duration for a task.",defaultValue:"45",isRequired:true,inputType:"number"},{type:"text",name:"question7",title:"What is the default deadline (in days) for this experiment?",description:"This is a moving deadline applied to any goal that the user does not input a deadline for. E.g. if you input 14, the goal's deadline is set to 14 days after the Workflowy pull.",defaultValue:14,isRequired:true,inputType:"number"},{type:"html",name:"question17",html:"<b>Bounds for goal values and task durations</b>"},{type:"text",name:"question10",title:"What is the minimum sum of goal values?",description:"E.g. if a user has goal values {1,2,3} and they are supposed to sum up to a 40 hour work week, they should be told to adjust their goal values",defaultValue:0,isRequired:true,inputType:"number"},{type:"text",name:"question15",title:"What is the maximum sum of goal values?",description:"E.g. if a user has goal values {1,2,3} and they are supposed to sum up to a 40 hour work week, they should be told to adjust their goal values",defaultValue:0,isRequired:true,inputType:"number"},{type:"text",name:"question14",title:"What is the minimum goal value per duration?",description:"Think of this like a minimum wage.\n",defaultValue:0,isRequired:true,inputType:"number"},{type:"text",name:"question13",title:"What is the maximum goal value per duration?",description:"Similarly, think of this like a maximum wage; if you input 0, we will assume there is no maximum",defaultValue:0,isRequired:true,inputType:"number"},{type:"text",name:"question11",title:"What is the maximum allowed duration for a task?",description:"If you input 0, we will assume there is no bound (i.e. infinite duration is allowed.)",defaultValue:"0",isRequired:true,inputType:"number"}]}]}

function sendDataToServer(survey) {
    //send Ajax request to your web server.
    alert("The results are:" + JSON.stringify(survey.data));
}

var survey = new Survey.Model(surveyJSON);
$("#surveyContainer").Survey({
    model: survey,
    onComplete: sendDataToServer
});

//remove complete button since it doesn't make sense for this application
document.getElementsByClassName("btn sv_complete_btn")[0].style.visibility = "hidden";
</script>
</body>
 </html>